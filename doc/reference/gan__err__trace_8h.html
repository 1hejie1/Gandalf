<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>gan_err_trace.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul>
</div>
<div class="nav">
<a class="el" href="dir_1727eebe7d4b7d5b5ff49c1f17d65055.html">common</a></div>
<h1>gan_err_trace.h File Reference</h1><code>#include &lt;<a class="el" href="gan__err_8h-source.html">gandalf/common/gan_err.h</a>&gt;</code><br>

<p>
<a href="gan__err__trace_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stores details of single error in an error trace.  <a href="structGan__ErrorTrace.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="gac73bfd84e56e95c876c88346a6b19c4"></a><!-- doxytag: member="gan_err_trace.h::GAN_ET_YES" ref="gac73bfd84e56e95c876c88346a6b19c4" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CommonError.html#gac73bfd84e56e95c876c88346a6b19c4">GAN_ET_YES</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Values for the 'f_spare' and 'f_static_message' in the <a class="el" href="structGan__ErrorTrace.html" title="Stores details of single error in an error trace.">Gan_ErrorTrace</a> structure. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="g0a400cf0e2d5e75d10d1fe356e6ca7ce"></a><!-- doxytag: member="gan_err_trace.h::GAN_ET_NO" ref="g0a400cf0e2d5e75d10d1fe356e6ca7ce" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>GAN_ET_NO</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CommonError.html#g3adf1755e171496c4c1386be59d80541">gan_et_push</a> (<a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *et_top, const char *func_name, int err_code, const char *file_name, int line_number, const char *message, int number)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pushes a new error recorded onto error trace.  <a href="group__CommonError.html#g3adf1755e171496c4c1386be59d80541"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CommonError.html#g23476a1301df1f0a16e88b5070a9d7b5">gan_et_get_record_count</a> (<a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *et_record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Counts number of records in trace from specified starting point.  <a href="group__CommonError.html#g23476a1301df1f0a16e88b5070a9d7b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CommonError.html#g6b056dc0edd547f9de0d84f1bc3778fa">gan_et_get_record_next</a> (<a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *et_record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns pointer to next non-spare error record after et_record.  <a href="group__CommonError.html#g6b056dc0edd547f9de0d84f1bc3778fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CommonError.html#g8a7f29b08a1666af943ec1a36b544662">gan_et_get_record_first</a> (<a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *et_record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns pointer to first non-spare error record from <em>et_record</em>.  <a href="group__CommonError.html#g8a7f29b08a1666af943ec1a36b544662"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CommonError.html#g0c9e24b690e01cccad81620d845f9a2e">gan_et_flush_trace</a> (<a class="el" href="structGan__ErrorTrace.html">Gan_ErrorTrace</a> *a_record)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Flush all errors in error trace.  <a href="group__CommonError.html#g0c9e24b690e01cccad81620d845f9a2e"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Module: Error trace<p>
Part of: Gandalf Exception Handling<p>
<dl class="version" compact><dt><b>Version:</b></dt><dd>1.7 </dd></dl>
<dl class="date" compact><dt><b>Date:</b></dt><dd>2005/10/18 16:30:47 </dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>pm</dd></dl>
Copyright: (c) 2000 Industrial Research Limited<p>
Short Desc: Data structure and management functions for error trace Description: This module implements the error trace used in gan_err.[ch].<p>
An error trace is a last-in first-out (LIFO) stack for temporarily holding details of multiple error events until an application is ready to read the stack.<p>
The stack is usually flushed by the function in a sequence of nested calls that initially detects an error. As the call stack unwinds the successive functions also register errors, but they should not flush the error trace.<p>
The stack is implemented as a linked list of error records. If in the process of allocating heap memory for a new error record a memory error occurs, then this is refered to as a deep error.<p>
The stack always maintains two preallocated and unused error records for storing the details of the deep error and the error that was in the process of being registered when the deep error occured.<p>
Even if the top of the stack holds a deep error record and the two preallocated records are used, new errors can still be registered into the trace. These attempts may lead to repeated deep errors, in which case the top deep error serves as an indicator of the deep continuing error state. However, if the registration process is successful (because in the intervening time, some external agent has free'd heap memory) the old deep error record is left on the stack and the new errors are registered on top of it.<p>
To ensure that the stack has at least two preallocated records at process startup time, the bottom and second to bottom records of the stack use statically allocated memory. These can never be dynamically free'd.<p>
To do this, an external module must define two static error records. In <a class="el" href="gan__err_8c.html">gandalf/common/gan_err.c</a>, this is implemented as:<p>
<a class="el" href="structGan__ErrorTrace.html" title="Stores details of single error in an error trace.">Gan_ErrorTrace</a> record_last = {NULL, GAN_ET_YES, GAN_ET_NO, GAN_ET_YES, NULL, GAN_EC_DFT_SPARE, NULL, 0,NULL}; <a class="el" href="structGan__ErrorTrace.html" title="Stores details of single error in an error trace.">Gan_ErrorTrace</a> record_2nd_last = {&amp;record_last, GAN_ET_YES, GAN_ET_NO, GAN_ET_YES, NULL,GAN_EC_DFT_SPARE, NULL,0,NULL};<p>
<a class="el" href="structGan__ErrorTrace.html" title="Stores details of single error in an error trace.">Gan_ErrorTrace</a> * gan_et_trace_top = <p>
The symbol gan_et_trace_top refers to the current top of stack and is passed into the functions defined in this module as argument 1.<p>
NB. A statically allocated string containing the deep error text message must also exist, but this is defined in <a class="el" href="gan__err__trace_8c.html">gandalf/common/gan_err_trace.c</a>. <hr size="1"><address style="text-align: right;"><small>Generated on Tue Jan 27 20:53:40 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
